<!-- svelte-ignore a11y-click-events-have-key-events -->
<!-- svelte-ignore a11y-no-static-element-interactions -->
<div class="flex flex-col h-[647px] justify-center items-center">
    <Tabs style="pill" class="space-x-3 mb-[-16px]">
        <TabItem open title="Admin" activeClasses="p-3 text-white bg-green-700 rounded-lg dark:bg-gray-800 dark:text-primary-500">
            {#if !otpSent} 
                <div class="flex justify-center items-center">
                    <form on:submit|preventDefault={handleLogin} class="w-[500px] bg-white h-auto space-y-6 border-2 border-solid border-green-400 px-[3%] py-[20px] rounded-lg">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>Login Form</span>
                        </div>
                        <div class="">
                            <Input color="green" bind:value={email} type="email" placeholder="Email" required/>
                        </div>
                        <div class="flex items-center">
                            <Input id="loginAdmin" color="green" bind:value={password} type="password" placeholder="Password" required/>
                            {#if showPassword}
                                <i class="ml-[-35px]" on:click={() => viewPassword("loginAdmin")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 93" fill="none">
                                        <path d="M85.5709 44.1568C82.3783 37.4307 78.579 31.9451 74.173 27.7002L69.552 32.3211C73.3202 35.9221 76.6024 40.633 79.4405 46.5C71.8843 62.1392 61.1584 69.5684 46.5 69.5684C42.1001 69.5684 38.0474 68.8908 34.3419 67.5358L29.335 72.5427C34.4815 74.9192 40.2031 76.1074 46.5 76.1074C63.9557 76.1074 76.9793 67.0163 85.5709 48.8341C85.9163 48.1028 86.0954 47.3042 86.0954 46.4955C86.0954 45.6867 85.9163 44.8881 85.5709 44.1568ZM79.7975 15.0362L75.9258 11.16C75.8583 11.0924 75.7782 11.0388 75.69 11.0023C75.6018 10.9657 75.5072 10.9469 75.4118 10.9469C75.3163 10.9469 75.2217 10.9657 75.1335 11.0023C75.0453 11.0388 74.9652 11.0924 74.8977 11.16L64.9647 21.0885C59.4882 18.2912 53.3333 16.8926 46.5 16.8926C29.0443 16.8926 16.0207 25.9837 7.42911 44.1659C7.08377 44.8972 6.90466 45.6958 6.90466 46.5045C6.90466 47.3132 7.08377 48.1119 7.42911 48.8432C10.8615 56.0725 14.9938 61.8671 19.8261 66.2271L10.2155 75.835C10.0793 75.9712 10.0028 76.1559 10.0028 76.3485C10.0028 76.5412 10.0793 76.7259 10.2155 76.8621L14.0926 80.7393C14.2288 80.8754 14.4136 80.9519 14.6062 80.9519C14.7988 80.9519 14.9835 80.8754 15.1198 80.7393L79.7975 16.0643C79.865 15.9968 79.9186 15.9167 79.9552 15.8285C79.9917 15.7403 80.0106 15.6457 80.0106 15.5502C80.0106 15.4548 79.9917 15.3602 79.9552 15.272C79.9186 15.1838 79.865 15.1037 79.7975 15.0362ZM13.5595 46.5C21.1248 30.8607 31.8507 23.4316 46.5 23.4316C51.4533 23.4316 55.9571 24.2817 60.0431 26.01L53.6585 32.3947C50.6348 30.7814 47.1726 30.1826 43.7827 30.6868C40.3928 31.1909 37.2547 32.7712 34.8313 35.1946C32.408 37.618 30.8276 40.7561 30.3235 44.146C29.8194 47.5359 30.4181 50.998 32.0314 54.0217L24.4552 61.598C20.262 57.897 16.6474 52.8828 13.5595 46.5ZM35.9648 46.5C35.9664 44.8985 36.3458 43.32 37.072 41.8926C37.7983 40.4653 38.851 39.2294 40.1447 38.2854C41.4383 37.3413 42.9364 36.7158 44.5173 36.4595C46.0981 36.2032 47.7171 36.3234 49.2428 36.8104L36.4471 49.606C36.1264 48.6019 35.9637 47.5541 35.9648 46.5Z" fill="black"/>
                                        <path d="M46.1367 56.6719C45.8225 56.6719 45.5128 56.6574 45.2058 56.6292L40.4087 61.4263C43.294 62.5313 46.4375 62.7768 49.4594 62.1333C52.4812 61.4898 55.252 59.9847 57.4367 57.8C59.6214 55.6153 61.1265 52.8445 61.77 49.8227C62.4136 46.8008 62.168 43.6572 61.063 40.772L56.2659 45.5691C56.2941 45.8761 56.3086 46.1858 56.3086 46.5C56.3093 47.836 56.0467 49.159 55.5358 50.3935C55.0248 51.6279 54.2756 52.7495 53.3309 53.6942C52.3862 54.6389 51.2646 55.3881 50.0302 55.8991C48.7958 56.41 47.4727 56.6726 46.1367 56.6719Z" fill="black"/>
                                    </svg>
                                </i>
                            {:else}    
                                <i class="ml-[-35px]" on:click={() => viewPassword("loginAdmin")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="10" viewBox="0 0 93 53" fill="none">
                                        <path d="M46.5 0.0195312C28.5438 0.0195312 11.7609 8.94038 1.67757 23.8311C1.23293 24.4901 0.92346 25.2307 0.767078 26.0101C0.610697 26.7896 0.610517 27.5922 0.766547 28.3717C0.922577 29.1512 1.23172 29.892 1.67606 30.5512C2.1204 31.2103 2.69112 31.7748 3.35515 32.2118C4.39961 32.9272 5.52992 33.3314 6.70673 33.3314C8.65973 33.3314 10.67 32.3835 11.8503 30.6487C12.2223 30.0943 12.6802 29.6114 13.0772 29.082C15.4743 36.0373 19.9838 42.0704 25.9758 46.3387C31.9678 50.6069 39.1432 52.8973 46.5 52.89C53.8569 52.8979 61.0326 50.6077 67.0247 46.3393C73.0168 42.071 77.5261 36.0376 79.9228 29.082C80.3162 29.615 80.7777 30.0943 81.1497 30.6487C83.0275 33.4316 86.8548 34.0933 89.6448 32.2118C90.3093 31.7747 90.8804 31.2102 91.3251 30.5508C91.7699 29.8915 92.0794 29.1504 92.2357 28.3706C92.3921 27.5908 92.3922 26.7878 92.236 26.0079C92.0799 25.2281 91.7706 24.487 91.326 23.8275C86.3696 16.4975 79.6915 10.4946 71.8766 6.3446C64.0617 2.19458 55.3484 0.0204704 46.5 0.0195312ZM46.5 12.9859C49.5514 12.9934 52.4757 14.2089 54.6334 16.3666C56.791 18.5243 58.0066 21.4486 58.0141 24.5C58.0066 27.5514 56.791 30.4757 54.6334 32.6334C52.4757 34.791 49.5514 36.0066 46.5 36.0141C43.4486 36.0066 40.5243 34.791 38.3666 32.6334C36.209 30.4757 34.9934 27.5514 34.9859 24.5C34.9934 21.4486 36.209 18.5243 38.3666 16.3666C40.5243 14.2089 43.4486 12.9934 46.5 12.9859ZM60.6968 14.6635C66.6703 16.8096 71.9892 20.3472 76.4567 24.9471C73.1195 38.3892 60.9615 48.4225 46.5 48.4225C32.0385 48.4225 19.8805 38.3892 16.5433 24.9471C20.9584 20.4064 26.3473 16.928 32.3032 14.7743C30.5327 17.3595 29.5015 20.3788 29.3208 23.5069C29.14 26.635 29.8165 29.753 31.2773 32.5249C32.7382 35.2968 34.9279 37.6173 37.6105 39.2363C40.2931 40.8553 43.3667 41.7114 46.5 41.7121C48.7606 41.7126 50.9992 41.2678 53.0879 40.403C55.1766 39.5382 57.0745 38.2704 58.6731 36.6721C60.2718 35.0737 61.54 33.1761 62.4052 31.0876C63.2704 28.9991 63.7157 26.7606 63.7157 24.5C63.7417 20.9892 62.6878 17.5553 60.6968 14.6635Z" fill="black"/>
                                    </svg>
                                </i>
                            {/if}
                        </div>
                        <div class="flex justify-center">
                            <Button type="submit" class="w-full" outline color="green">
                                {#if loading}
                                    <Spinner class="mr-3" color="green"/>
                                {/if}
                                Login
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !otpVerified}
                <div class="flex justify-center items-center">
                    <form on:submit|preventDefault={handleVerify} class="w-[500px] h-auto space-y-6 bg-white border-2 border-solid border-green-400 px-[2%] py-[20px] rounded-lg">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>Verification</span>
                        </div>
                        <div class="">
                            <Input bind:value={otp} type="text" placeholder="Input OTP code" required color="green"/>
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">Verify</Button>
                        </div>
                    </form>
                </div>
            {/if}
        </TabItem>
        <TabItem title="User" activeClasses="p-3 text-white bg-green-700 rounded-lg dark:bg-gray-800 dark:text-primary-500">
            {#if !loginEmail} 
                <div class="flex justify-center items-center">
                    <form on:submit|preventDefault={handleLoginEmail} class="w-[500px] space-y-6 h-auto border-2 border-solid border-green-400 px-[2%] bg-white rounded-lg py-[20px]">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>User Login</span>
                        </div>
                        <div class="">
                            <Input bind:value={emailData.email} color="green" placeholder="Email" type="email" required/>
                        </div>
                        <div class="flex items-center">
                            <Input id="loginPassword" bind:value={emailData.password} color="green" placeholder="Password" required type="password"/>
                            {#if showPassword}
                                <i class="ml-[-35px]" on:click={() => viewPassword("loginPassword")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 93" fill="none">
                                        <path d="M85.5709 44.1568C82.3783 37.4307 78.579 31.9451 74.173 27.7002L69.552 32.3211C73.3202 35.9221 76.6024 40.633 79.4405 46.5C71.8843 62.1392 61.1584 69.5684 46.5 69.5684C42.1001 69.5684 38.0474 68.8908 34.3419 67.5358L29.335 72.5427C34.4815 74.9192 40.2031 76.1074 46.5 76.1074C63.9557 76.1074 76.9793 67.0163 85.5709 48.8341C85.9163 48.1028 86.0954 47.3042 86.0954 46.4955C86.0954 45.6867 85.9163 44.8881 85.5709 44.1568ZM79.7975 15.0362L75.9258 11.16C75.8583 11.0924 75.7782 11.0388 75.69 11.0023C75.6018 10.9657 75.5072 10.9469 75.4118 10.9469C75.3163 10.9469 75.2217 10.9657 75.1335 11.0023C75.0453 11.0388 74.9652 11.0924 74.8977 11.16L64.9647 21.0885C59.4882 18.2912 53.3333 16.8926 46.5 16.8926C29.0443 16.8926 16.0207 25.9837 7.42911 44.1659C7.08377 44.8972 6.90466 45.6958 6.90466 46.5045C6.90466 47.3132 7.08377 48.1119 7.42911 48.8432C10.8615 56.0725 14.9938 61.8671 19.8261 66.2271L10.2155 75.835C10.0793 75.9712 10.0028 76.1559 10.0028 76.3485C10.0028 76.5412 10.0793 76.7259 10.2155 76.8621L14.0926 80.7393C14.2288 80.8754 14.4136 80.9519 14.6062 80.9519C14.7988 80.9519 14.9835 80.8754 15.1198 80.7393L79.7975 16.0643C79.865 15.9968 79.9186 15.9167 79.9552 15.8285C79.9917 15.7403 80.0106 15.6457 80.0106 15.5502C80.0106 15.4548 79.9917 15.3602 79.9552 15.272C79.9186 15.1838 79.865 15.1037 79.7975 15.0362ZM13.5595 46.5C21.1248 30.8607 31.8507 23.4316 46.5 23.4316C51.4533 23.4316 55.9571 24.2817 60.0431 26.01L53.6585 32.3947C50.6348 30.7814 47.1726 30.1826 43.7827 30.6868C40.3928 31.1909 37.2547 32.7712 34.8313 35.1946C32.408 37.618 30.8276 40.7561 30.3235 44.146C29.8194 47.5359 30.4181 50.998 32.0314 54.0217L24.4552 61.598C20.262 57.897 16.6474 52.8828 13.5595 46.5ZM35.9648 46.5C35.9664 44.8985 36.3458 43.32 37.072 41.8926C37.7983 40.4653 38.851 39.2294 40.1447 38.2854C41.4383 37.3413 42.9364 36.7158 44.5173 36.4595C46.0981 36.2032 47.7171 36.3234 49.2428 36.8104L36.4471 49.606C36.1264 48.6019 35.9637 47.5541 35.9648 46.5Z" fill="black"/>
                                        <path d="M46.1367 56.6719C45.8225 56.6719 45.5128 56.6574 45.2058 56.6292L40.4087 61.4263C43.294 62.5313 46.4375 62.7768 49.4594 62.1333C52.4812 61.4898 55.252 59.9847 57.4367 57.8C59.6214 55.6153 61.1265 52.8445 61.77 49.8227C62.4136 46.8008 62.168 43.6572 61.063 40.772L56.2659 45.5691C56.2941 45.8761 56.3086 46.1858 56.3086 46.5C56.3093 47.836 56.0467 49.159 55.5358 50.3935C55.0248 51.6279 54.2756 52.7495 53.3309 53.6942C52.3862 54.6389 51.2646 55.3881 50.0302 55.8991C48.7958 56.41 47.4727 56.6726 46.1367 56.6719Z" fill="black"/>
                                    </svg>
                                </i>
                            {:else}    
                                <i class="ml-[-35px]" on:click={() => viewPassword("loginPassword")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="10" viewBox="0 0 93 53" fill="none">
                                        <path d="M46.5 0.0195312C28.5438 0.0195312 11.7609 8.94038 1.67757 23.8311C1.23293 24.4901 0.92346 25.2307 0.767078 26.0101C0.610697 26.7896 0.610517 27.5922 0.766547 28.3717C0.922577 29.1512 1.23172 29.892 1.67606 30.5512C2.1204 31.2103 2.69112 31.7748 3.35515 32.2118C4.39961 32.9272 5.52992 33.3314 6.70673 33.3314C8.65973 33.3314 10.67 32.3835 11.8503 30.6487C12.2223 30.0943 12.6802 29.6114 13.0772 29.082C15.4743 36.0373 19.9838 42.0704 25.9758 46.3387C31.9678 50.6069 39.1432 52.8973 46.5 52.89C53.8569 52.8979 61.0326 50.6077 67.0247 46.3393C73.0168 42.071 77.5261 36.0376 79.9228 29.082C80.3162 29.615 80.7777 30.0943 81.1497 30.6487C83.0275 33.4316 86.8548 34.0933 89.6448 32.2118C90.3093 31.7747 90.8804 31.2102 91.3251 30.5508C91.7699 29.8915 92.0794 29.1504 92.2357 28.3706C92.3921 27.5908 92.3922 26.7878 92.236 26.0079C92.0799 25.2281 91.7706 24.487 91.326 23.8275C86.3696 16.4975 79.6915 10.4946 71.8766 6.3446C64.0617 2.19458 55.3484 0.0204704 46.5 0.0195312ZM46.5 12.9859C49.5514 12.9934 52.4757 14.2089 54.6334 16.3666C56.791 18.5243 58.0066 21.4486 58.0141 24.5C58.0066 27.5514 56.791 30.4757 54.6334 32.6334C52.4757 34.791 49.5514 36.0066 46.5 36.0141C43.4486 36.0066 40.5243 34.791 38.3666 32.6334C36.209 30.4757 34.9934 27.5514 34.9859 24.5C34.9934 21.4486 36.209 18.5243 38.3666 16.3666C40.5243 14.2089 43.4486 12.9934 46.5 12.9859ZM60.6968 14.6635C66.6703 16.8096 71.9892 20.3472 76.4567 24.9471C73.1195 38.3892 60.9615 48.4225 46.5 48.4225C32.0385 48.4225 19.8805 38.3892 16.5433 24.9471C20.9584 20.4064 26.3473 16.928 32.3032 14.7743C30.5327 17.3595 29.5015 20.3788 29.3208 23.5069C29.14 26.635 29.8165 29.753 31.2773 32.5249C32.7382 35.2968 34.9279 37.6173 37.6105 39.2363C40.2931 40.8553 43.3667 41.7114 46.5 41.7121C48.7606 41.7126 50.9992 41.2678 53.0879 40.403C55.1766 39.5382 57.0745 38.2704 58.6731 36.6721C60.2718 35.0737 61.54 33.1761 62.4052 31.0876C63.2704 28.9991 63.7157 26.7606 63.7157 24.5C63.7417 20.9892 62.6878 17.5553 60.6968 14.6635Z" fill="black"/>
                                    </svg>
                                </i>
                            {/if}
                        </div>
                        <div class="flex justify-center">
                            <Button type="submit" outline color="green" class="w-full">
                                {#if loading}
                                    <Spinner class="mr-3" color="green"/>
                                {/if}
                                Login
                            </Button>
                        </div>
                        <div class="flex justify-center items-center space-x-3">
                            <span>Continue with</span>
                            <Button color="none" on:click={loginTelegramForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 93 93" fill="none">
                                    <g clip-path="url(#clip0_40_86)">
                                        <path d="M46.5 0C34.1702 0 22.3345 4.90212 13.623 13.6194C4.90257 22.3402 0.0024156 34.1672 0 46.5C0 58.8276 4.9043 70.6633 13.623 79.3806C22.3345 88.0979 34.1702 93 46.5 93C58.8298 93 70.6655 88.0979 79.377 79.3806C88.0957 70.6633 93 58.8276 93 46.5C93 34.1724 88.0957 22.3367 79.377 13.6194C70.6655 4.90212 58.8298 0 46.5 0Z" fill="url(#paint0_linear_40_86)"/>
                                        <path d="M21.0485 46.0089C34.6062 40.1034 43.6446 36.2097 48.1638 34.3286C61.0821 28.9572 63.7631 28.0243 65.5141 27.9926C65.8992 27.9865 66.7566 28.0816 67.316 28.5339C67.781 28.9154 67.9118 29.4312 67.9772 29.7934C68.0353 30.1553 68.1152 30.9799 68.0498 31.6236C67.3523 38.9765 64.3226 56.8194 62.7823 65.055C62.1356 68.5396 60.8496 69.7079 59.6072 69.8219C56.9044 70.0704 54.8555 68.0375 52.2398 66.3235C48.1493 63.6403 45.8388 61.9707 41.8645 59.3529C37.2727 56.3275 40.2516 54.6644 42.8672 51.947C43.5502 51.2357 55.4512 40.4136 55.6765 39.432C55.7055 39.3092 55.7346 38.8515 55.4585 38.6103C55.1897 38.3683 54.7901 38.4512 54.4995 38.5165C54.0853 38.6095 47.5535 42.9311 34.8823 51.4806C33.0295 52.755 31.3512 53.3762 29.8399 53.3435C28.1834 53.3079 24.9865 52.4048 22.6106 51.6332C19.7044 50.6865 17.3866 50.1859 17.5901 48.578C17.6918 47.741 18.847 46.8844 21.0485 46.0089Z" fill="white"/>
                                    </g>
                                    <defs>
                                        <linearGradient id="paint0_linear_40_86" x1="4650" y1="0" x2="4650" y2="9300" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#2AABEE"/>
                                            <stop offset="1" stop-color="#229ED9"/>
                                        </linearGradient>
                                        <clipPath id="clip0_40_86">
                                            <rect width="93" height="93" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                            <Button color="none" on:click={loginSMSForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 93 93" fill="none">
                                    <g clip-path="url(#clip0_44_112)">
                                        <path d="M46.5 81.375C72.184 81.375 93 64.4643 93 43.5938C93 22.7232 72.184 5.8125 46.5 5.8125C20.8161 5.8125 3.75012e-05 22.7232 3.75012e-05 43.5938C3.75012e-05 51.7857 3.21508 59.3602 8.6643 65.5541C8.31918 70.0043 6.59359 73.9641 4.77719 76.9793C3.77816 78.6504 2.76097 79.9945 2.01625 80.9027C1.6348 81.3568 1.34418 81.702 1.12621 81.9381C1.01722 82.0471 0.944569 82.1379 0.890077 82.1924L0.835584 82.2469C3.75053e-05 83.0824 -0.236095 84.3176 0.218006 85.4074C0.672108 86.4973 1.72562 87.2057 2.90629 87.2057C8.11937 87.2057 13.3688 85.5891 17.7282 83.7C21.8877 81.8836 25.4297 79.7221 27.5912 78.1418C33.3674 80.2307 39.7612 81.3932 46.5 81.3932V81.375ZM36.8549 32.1141C38.0356 31.7145 39.3434 32.1322 40.1063 33.1312L46.5 41.6502L52.8938 33.1312C53.6385 32.1322 54.9463 31.7145 56.1452 32.1141C57.344 32.5137 58.125 33.6217 58.125 34.875V52.3125C58.125 53.9109 56.8172 55.2188 55.2188 55.2188C53.6203 55.2188 52.3125 53.9109 52.3125 52.3125V43.5938L48.825 48.2438C48.2801 48.9703 47.4082 49.4062 46.5 49.4062C45.5918 49.4062 44.72 48.9703 44.175 48.2438L40.6875 43.5938V52.3125C40.6875 53.9109 39.3797 55.2188 37.7813 55.2188C36.1829 55.2188 34.875 53.9109 34.875 52.3125V34.875C34.875 33.6217 35.6743 32.5137 36.8549 32.1141ZM68.2969 39.0164V39.0891C68.3151 39.1072 68.4059 39.2344 68.6965 39.3979C69.4049 39.8156 70.4403 40.1426 72.0205 40.633L72.1295 40.6693C73.4737 41.0689 75.2719 41.6139 76.7069 42.5221C78.3598 43.5574 79.8674 45.283 79.9037 47.9531C79.9401 50.6777 78.5233 52.6758 76.6705 53.8201C74.945 54.8918 72.8743 55.2551 71.0942 55.2006C68.8782 55.1279 66.7893 54.4014 65.1727 53.8564C64.9184 53.7656 64.6823 53.693 64.4461 53.6021C62.9203 53.0936 62.103 51.4406 62.6116 49.933C63.1202 48.4254 64.7731 47.5898 66.2807 48.0984C66.5895 48.2074 66.8801 48.2982 67.1707 48.3891C68.8237 48.9521 70.0043 49.3518 71.2758 49.3881C72.2385 49.4244 73.0922 49.2064 73.6008 48.8795C73.8188 48.7342 73.9278 48.607 73.9823 48.5162C74.0186 48.4436 74.0912 48.2982 74.0912 48.0258V47.9895C74.0912 47.8623 74.0912 47.7352 73.6008 47.4264C72.9106 46.9904 71.8571 46.6453 70.3313 46.173L70.1133 46.1004C68.8055 45.7008 67.0799 45.1922 65.6995 44.3566C64.0647 43.3758 62.4844 41.6865 62.4844 39.0164C62.4662 36.2555 64.0465 34.3482 65.8448 33.2766C67.5522 32.2775 69.5684 31.9143 71.2395 31.9324C73.0559 31.9688 74.8178 32.3502 76.3073 32.7316C77.8512 33.1494 78.7776 34.7297 78.3598 36.2918C77.942 37.8539 76.3618 38.7621 74.7996 38.3443C73.4737 37.9992 72.2385 37.7449 71.1487 37.7268C70.2586 37.7086 69.3686 37.9266 68.8055 38.2535C68.5512 38.3988 68.4241 38.5441 68.3696 38.6168C68.3332 38.6713 68.2969 38.7621 68.2969 38.9619V39.0164ZM18.8907 39.0164V39.0891C18.9088 39.1072 18.9996 39.2344 19.2903 39.3979C19.9987 39.8156 21.034 40.1426 22.6143 40.633L22.7233 40.6693C24.0674 41.0689 25.8657 41.6139 27.3006 42.5221C28.9536 43.5574 30.4612 45.283 30.4975 47.9531C30.5338 50.6777 29.117 52.6758 27.2643 53.8201C25.5387 54.8918 23.468 55.2551 21.6879 55.2006C19.4537 55.1279 17.2922 54.3832 15.6575 53.8201C15.4213 53.7475 15.2034 53.6748 15.0036 53.6021C13.4778 53.0936 12.6604 51.4406 13.169 49.933C13.6776 48.4254 15.3305 47.5898 16.8381 48.0984C17.0924 48.1893 17.3467 48.2619 17.5829 48.3527C19.3084 48.934 20.5799 49.3699 21.8877 49.4062C22.8504 49.4426 23.7041 49.2246 24.2127 48.8977C24.4307 48.7523 24.5397 48.6252 24.5942 48.5344C24.6305 48.4617 24.7032 48.3164 24.7032 48.0439V48.0076C24.7032 47.8805 24.7032 47.7533 24.2127 47.4445C23.5225 47.0086 22.469 46.6635 20.9432 46.1912L20.7252 46.1186C19.4174 45.7189 17.6918 45.2104 16.3114 44.3748C14.6766 43.4121 13.0963 41.7229 13.0782 39.0527C13.06 36.2918 14.6403 34.3846 16.4385 33.3129C18.1459 32.3139 20.1621 31.9506 21.8332 31.9688C23.5588 31.9869 25.8657 32.3502 27.4823 32.768C29.0262 33.1857 29.9526 34.766 29.5348 36.3281C29.117 37.8902 27.5368 38.7984 25.9746 38.3807C24.7758 38.0537 22.9231 37.7812 21.7424 37.7631C20.8524 37.7449 19.9623 37.9629 19.3993 38.2898C19.145 38.4352 19.0178 38.5805 18.9633 38.6531C18.927 38.7076 18.8907 38.7984 18.8907 38.9982V39.0164Z" fill="#85B6FF"/>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_44_112">
                                            <rect width="93" height="93" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !loginTelegram}
                <div class="flex justify-center items-center">
                    <form on:submit|preventDefault={handleLoginTelegram} class="w-[500px] space-y-6 h-auto border-2 border-solid border-green-400 px-[2%] bg-white rounded-lg py-[20px]">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>User Login</span>
                        </div>
                        <div class="">
                            <Input bind:value={telegramData.username} color="green" placeholder="Username" type="text" required/>
                        </div>
                        <div class="flex items-center">
                            <Input id="LogintelegramPassword" bind:value={telegramData.bot_token} color="green" placeholder="Your Bot Token" type="password" required/>
                            {#if showPassword}
                                <i class="ml-[-35px]" on:click={() => viewPassword("LogintelegramPassword")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 93" fill="none">
                                        <path d="M85.5709 44.1568C82.3783 37.4307 78.579 31.9451 74.173 27.7002L69.552 32.3211C73.3202 35.9221 76.6024 40.633 79.4405 46.5C71.8843 62.1392 61.1584 69.5684 46.5 69.5684C42.1001 69.5684 38.0474 68.8908 34.3419 67.5358L29.335 72.5427C34.4815 74.9192 40.2031 76.1074 46.5 76.1074C63.9557 76.1074 76.9793 67.0163 85.5709 48.8341C85.9163 48.1028 86.0954 47.3042 86.0954 46.4955C86.0954 45.6867 85.9163 44.8881 85.5709 44.1568ZM79.7975 15.0362L75.9258 11.16C75.8583 11.0924 75.7782 11.0388 75.69 11.0023C75.6018 10.9657 75.5072 10.9469 75.4118 10.9469C75.3163 10.9469 75.2217 10.9657 75.1335 11.0023C75.0453 11.0388 74.9652 11.0924 74.8977 11.16L64.9647 21.0885C59.4882 18.2912 53.3333 16.8926 46.5 16.8926C29.0443 16.8926 16.0207 25.9837 7.42911 44.1659C7.08377 44.8972 6.90466 45.6958 6.90466 46.5045C6.90466 47.3132 7.08377 48.1119 7.42911 48.8432C10.8615 56.0725 14.9938 61.8671 19.8261 66.2271L10.2155 75.835C10.0793 75.9712 10.0028 76.1559 10.0028 76.3485C10.0028 76.5412 10.0793 76.7259 10.2155 76.8621L14.0926 80.7393C14.2288 80.8754 14.4136 80.9519 14.6062 80.9519C14.7988 80.9519 14.9835 80.8754 15.1198 80.7393L79.7975 16.0643C79.865 15.9968 79.9186 15.9167 79.9552 15.8285C79.9917 15.7403 80.0106 15.6457 80.0106 15.5502C80.0106 15.4548 79.9917 15.3602 79.9552 15.272C79.9186 15.1838 79.865 15.1037 79.7975 15.0362ZM13.5595 46.5C21.1248 30.8607 31.8507 23.4316 46.5 23.4316C51.4533 23.4316 55.9571 24.2817 60.0431 26.01L53.6585 32.3947C50.6348 30.7814 47.1726 30.1826 43.7827 30.6868C40.3928 31.1909 37.2547 32.7712 34.8313 35.1946C32.408 37.618 30.8276 40.7561 30.3235 44.146C29.8194 47.5359 30.4181 50.998 32.0314 54.0217L24.4552 61.598C20.262 57.897 16.6474 52.8828 13.5595 46.5ZM35.9648 46.5C35.9664 44.8985 36.3458 43.32 37.072 41.8926C37.7983 40.4653 38.851 39.2294 40.1447 38.2854C41.4383 37.3413 42.9364 36.7158 44.5173 36.4595C46.0981 36.2032 47.7171 36.3234 49.2428 36.8104L36.4471 49.606C36.1264 48.6019 35.9637 47.5541 35.9648 46.5Z" fill="black"/>
                                        <path d="M46.1367 56.6719C45.8225 56.6719 45.5128 56.6574 45.2058 56.6292L40.4087 61.4263C43.294 62.5313 46.4375 62.7768 49.4594 62.1333C52.4812 61.4898 55.252 59.9847 57.4367 57.8C59.6214 55.6153 61.1265 52.8445 61.77 49.8227C62.4136 46.8008 62.168 43.6572 61.063 40.772L56.2659 45.5691C56.2941 45.8761 56.3086 46.1858 56.3086 46.5C56.3093 47.836 56.0467 49.159 55.5358 50.3935C55.0248 51.6279 54.2756 52.7495 53.3309 53.6942C52.3862 54.6389 51.2646 55.3881 50.0302 55.8991C48.7958 56.41 47.4727 56.6726 46.1367 56.6719Z" fill="black"/>
                                    </svg>
                                </i>
                            {:else}    
                                <i class="ml-[-35px]" on:click={() => viewPassword("LogintelegramPassword")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="10" viewBox="0 0 93 53" fill="none">
                                        <path d="M46.5 0.0195312C28.5438 0.0195312 11.7609 8.94038 1.67757 23.8311C1.23293 24.4901 0.92346 25.2307 0.767078 26.0101C0.610697 26.7896 0.610517 27.5922 0.766547 28.3717C0.922577 29.1512 1.23172 29.892 1.67606 30.5512C2.1204 31.2103 2.69112 31.7748 3.35515 32.2118C4.39961 32.9272 5.52992 33.3314 6.70673 33.3314C8.65973 33.3314 10.67 32.3835 11.8503 30.6487C12.2223 30.0943 12.6802 29.6114 13.0772 29.082C15.4743 36.0373 19.9838 42.0704 25.9758 46.3387C31.9678 50.6069 39.1432 52.8973 46.5 52.89C53.8569 52.8979 61.0326 50.6077 67.0247 46.3393C73.0168 42.071 77.5261 36.0376 79.9228 29.082C80.3162 29.615 80.7777 30.0943 81.1497 30.6487C83.0275 33.4316 86.8548 34.0933 89.6448 32.2118C90.3093 31.7747 90.8804 31.2102 91.3251 30.5508C91.7699 29.8915 92.0794 29.1504 92.2357 28.3706C92.3921 27.5908 92.3922 26.7878 92.236 26.0079C92.0799 25.2281 91.7706 24.487 91.326 23.8275C86.3696 16.4975 79.6915 10.4946 71.8766 6.3446C64.0617 2.19458 55.3484 0.0204704 46.5 0.0195312ZM46.5 12.9859C49.5514 12.9934 52.4757 14.2089 54.6334 16.3666C56.791 18.5243 58.0066 21.4486 58.0141 24.5C58.0066 27.5514 56.791 30.4757 54.6334 32.6334C52.4757 34.791 49.5514 36.0066 46.5 36.0141C43.4486 36.0066 40.5243 34.791 38.3666 32.6334C36.209 30.4757 34.9934 27.5514 34.9859 24.5C34.9934 21.4486 36.209 18.5243 38.3666 16.3666C40.5243 14.2089 43.4486 12.9934 46.5 12.9859ZM60.6968 14.6635C66.6703 16.8096 71.9892 20.3472 76.4567 24.9471C73.1195 38.3892 60.9615 48.4225 46.5 48.4225C32.0385 48.4225 19.8805 38.3892 16.5433 24.9471C20.9584 20.4064 26.3473 16.928 32.3032 14.7743C30.5327 17.3595 29.5015 20.3788 29.3208 23.5069C29.14 26.635 29.8165 29.753 31.2773 32.5249C32.7382 35.2968 34.9279 37.6173 37.6105 39.2363C40.2931 40.8553 43.3667 41.7114 46.5 41.7121C48.7606 41.7126 50.9992 41.2678 53.0879 40.403C55.1766 39.5382 57.0745 38.2704 58.6731 36.6721C60.2718 35.0737 61.54 33.1761 62.4052 31.0876C63.2704 28.9991 63.7157 26.7606 63.7157 24.5C63.7417 20.9892 62.6878 17.5553 60.6968 14.6635Z" fill="black"/>
                                    </svg>
                                </i>
                            {/if}
                        </div>
                        <div class="flex justify-center">
                            <Button type="submit" outline color="green" class="w-full">
                                {#if loading}
                                    <Spinner class="mr-3" color="green"/>
                                    <span>Please type "/start" on your telegram bot and follow the instruction</span>
                                {:else}
                                    Login
                                {/if}
                            </Button>
                        </div>
                        <div class="flex justify-center items-center space-x-3">
                            <span>Continue with</span>
                            <Button color="none" on:click={loginEmailForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 75" fill="none">
                                    <g clip-path="url(#clip0_41_93)">
                                        <path d="M21.1364 74.6308V36.1943L9.99278 25.289L0 19.2373V67.8478C0 71.6009 2.84268 74.6308 6.34107 74.6308H21.1364Z" fill="#4285F4"/>
                                        <path d="M71.8635 74.6308H86.6589C90.1678 74.6308 93 71.5896 93 67.8478V19.2377L81.6816 26.1691L71.8635 36.1943V74.6308Z" fill="#34A853"/>
                                        <path d="M21.1365 36.1943L19.6201 21.176L21.1365 6.80206L46.5 27.1508L71.8636 6.80206L73.5598 20.4L71.8636 36.1943L46.5 56.543L21.1365 36.1943Z" fill="#EA4335"/>
                                        <path d="M71.8635 6.80226V36.1945L93 19.2375V10.1936C93 1.80563 84.0487 -2.97611 77.7821 2.05433L71.8635 6.80226Z" fill="#FBBC04"/>
                                        <path d="M0 19.2374L9.72104 27.0366L21.1364 36.1944V6.80213L15.2179 2.0542C8.94035 -2.97663 0 1.8055 0 10.1931V19.237V19.2374Z" fill="#C5221F"/>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_41_93">
                                            <rect width="93" height="75" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                            <Button color="none" on:click={loginSMSForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 93 93" fill="none">
                                    <g clip-path="url(#clip0_44_112)">
                                        <path d="M46.5 81.375C72.184 81.375 93 64.4643 93 43.5938C93 22.7232 72.184 5.8125 46.5 5.8125C20.8161 5.8125 3.75012e-05 22.7232 3.75012e-05 43.5938C3.75012e-05 51.7857 3.21508 59.3602 8.6643 65.5541C8.31918 70.0043 6.59359 73.9641 4.77719 76.9793C3.77816 78.6504 2.76097 79.9945 2.01625 80.9027C1.6348 81.3568 1.34418 81.702 1.12621 81.9381C1.01722 82.0471 0.944569 82.1379 0.890077 82.1924L0.835584 82.2469C3.75053e-05 83.0824 -0.236095 84.3176 0.218006 85.4074C0.672108 86.4973 1.72562 87.2057 2.90629 87.2057C8.11937 87.2057 13.3688 85.5891 17.7282 83.7C21.8877 81.8836 25.4297 79.7221 27.5912 78.1418C33.3674 80.2307 39.7612 81.3932 46.5 81.3932V81.375ZM36.8549 32.1141C38.0356 31.7145 39.3434 32.1322 40.1063 33.1312L46.5 41.6502L52.8938 33.1312C53.6385 32.1322 54.9463 31.7145 56.1452 32.1141C57.344 32.5137 58.125 33.6217 58.125 34.875V52.3125C58.125 53.9109 56.8172 55.2188 55.2188 55.2188C53.6203 55.2188 52.3125 53.9109 52.3125 52.3125V43.5938L48.825 48.2438C48.2801 48.9703 47.4082 49.4062 46.5 49.4062C45.5918 49.4062 44.72 48.9703 44.175 48.2438L40.6875 43.5938V52.3125C40.6875 53.9109 39.3797 55.2188 37.7813 55.2188C36.1829 55.2188 34.875 53.9109 34.875 52.3125V34.875C34.875 33.6217 35.6743 32.5137 36.8549 32.1141ZM68.2969 39.0164V39.0891C68.3151 39.1072 68.4059 39.2344 68.6965 39.3979C69.4049 39.8156 70.4403 40.1426 72.0205 40.633L72.1295 40.6693C73.4737 41.0689 75.2719 41.6139 76.7069 42.5221C78.3598 43.5574 79.8674 45.283 79.9037 47.9531C79.9401 50.6777 78.5233 52.6758 76.6705 53.8201C74.945 54.8918 72.8743 55.2551 71.0942 55.2006C68.8782 55.1279 66.7893 54.4014 65.1727 53.8564C64.9184 53.7656 64.6823 53.693 64.4461 53.6021C62.9203 53.0936 62.103 51.4406 62.6116 49.933C63.1202 48.4254 64.7731 47.5898 66.2807 48.0984C66.5895 48.2074 66.8801 48.2982 67.1707 48.3891C68.8237 48.9521 70.0043 49.3518 71.2758 49.3881C72.2385 49.4244 73.0922 49.2064 73.6008 48.8795C73.8188 48.7342 73.9278 48.607 73.9823 48.5162C74.0186 48.4436 74.0912 48.2982 74.0912 48.0258V47.9895C74.0912 47.8623 74.0912 47.7352 73.6008 47.4264C72.9106 46.9904 71.8571 46.6453 70.3313 46.173L70.1133 46.1004C68.8055 45.7008 67.0799 45.1922 65.6995 44.3566C64.0647 43.3758 62.4844 41.6865 62.4844 39.0164C62.4662 36.2555 64.0465 34.3482 65.8448 33.2766C67.5522 32.2775 69.5684 31.9143 71.2395 31.9324C73.0559 31.9688 74.8178 32.3502 76.3073 32.7316C77.8512 33.1494 78.7776 34.7297 78.3598 36.2918C77.942 37.8539 76.3618 38.7621 74.7996 38.3443C73.4737 37.9992 72.2385 37.7449 71.1487 37.7268C70.2586 37.7086 69.3686 37.9266 68.8055 38.2535C68.5512 38.3988 68.4241 38.5441 68.3696 38.6168C68.3332 38.6713 68.2969 38.7621 68.2969 38.9619V39.0164ZM18.8907 39.0164V39.0891C18.9088 39.1072 18.9996 39.2344 19.2903 39.3979C19.9987 39.8156 21.034 40.1426 22.6143 40.633L22.7233 40.6693C24.0674 41.0689 25.8657 41.6139 27.3006 42.5221C28.9536 43.5574 30.4612 45.283 30.4975 47.9531C30.5338 50.6777 29.117 52.6758 27.2643 53.8201C25.5387 54.8918 23.468 55.2551 21.6879 55.2006C19.4537 55.1279 17.2922 54.3832 15.6575 53.8201C15.4213 53.7475 15.2034 53.6748 15.0036 53.6021C13.4778 53.0936 12.6604 51.4406 13.169 49.933C13.6776 48.4254 15.3305 47.5898 16.8381 48.0984C17.0924 48.1893 17.3467 48.2619 17.5829 48.3527C19.3084 48.934 20.5799 49.3699 21.8877 49.4062C22.8504 49.4426 23.7041 49.2246 24.2127 48.8977C24.4307 48.7523 24.5397 48.6252 24.5942 48.5344C24.6305 48.4617 24.7032 48.3164 24.7032 48.0439V48.0076C24.7032 47.8805 24.7032 47.7533 24.2127 47.4445C23.5225 47.0086 22.469 46.6635 20.9432 46.1912L20.7252 46.1186C19.4174 45.7189 17.6918 45.2104 16.3114 44.3748C14.6766 43.4121 13.0963 41.7229 13.0782 39.0527C13.06 36.2918 14.6403 34.3846 16.4385 33.3129C18.1459 32.3139 20.1621 31.9506 21.8332 31.9688C23.5588 31.9869 25.8657 32.3502 27.4823 32.768C29.0262 33.1857 29.9526 34.766 29.5348 36.3281C29.117 37.8902 27.5368 38.7984 25.9746 38.3807C24.7758 38.0537 22.9231 37.7812 21.7424 37.7631C20.8524 37.7449 19.9623 37.9629 19.3993 38.2898C19.145 38.4352 19.0178 38.5805 18.9633 38.6531C18.927 38.7076 18.8907 38.7984 18.8907 38.9982V39.0164Z" fill="#85B6FF"/>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_44_112">
                                            <rect width="93" height="93" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !loginSMS}
                <div class=" flex justify-center items-center">
                    <form on:submit|preventDefault={handleLoginSMS} class="w-[500px] h-auto space-y-6 border-2 border-solid border-green-400 px-[2%] bg-white rounded-lg py-[20px]">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>User Login</span>
                        </div>
                        <div class="">
                            <Input bind:value={smsData.phone_number} placeholder="Phone Number" type="tel" color="green" required/>
                        </div>
                        <div class="flex justify-center">
                            <Button type="submit" outline class="w-full" color="green">
                                {#if loading}
                                    <Spinner class="mr-3" color="green"/>
                                {/if}
                                Login
                            </Button>
                        </div>
                        <div class="flex justify-center items-center space-x-3">
                            <span>Continue with</span>
                            <Button color="none" on:click={loginEmailForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 75" fill="none">
                                    <g clip-path="url(#clip0_41_93)">
                                        <path d="M21.1364 74.6308V36.1943L9.99278 25.289L0 19.2373V67.8478C0 71.6009 2.84268 74.6308 6.34107 74.6308H21.1364Z" fill="#4285F4"/>
                                        <path d="M71.8635 74.6308H86.6589C90.1678 74.6308 93 71.5896 93 67.8478V19.2377L81.6816 26.1691L71.8635 36.1943V74.6308Z" fill="#34A853"/>
                                        <path d="M21.1365 36.1943L19.6201 21.176L21.1365 6.80206L46.5 27.1508L71.8636 6.80206L73.5598 20.4L71.8636 36.1943L46.5 56.543L21.1365 36.1943Z" fill="#EA4335"/>
                                        <path d="M71.8635 6.80226V36.1945L93 19.2375V10.1936C93 1.80563 84.0487 -2.97611 77.7821 2.05433L71.8635 6.80226Z" fill="#FBBC04"/>
                                        <path d="M0 19.2374L9.72104 27.0366L21.1364 36.1944V6.80213L15.2179 2.0542C8.94035 -2.97663 0 1.8055 0 10.1931V19.237V19.2374Z" fill="#C5221F"/>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_41_93">
                                            <rect width="93" height="75" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                            <Button color="none" on:click={loginTelegramForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 93 93" fill="none">
                                    <g clip-path="url(#clip0_40_86)">
                                        <path d="M46.5 0C34.1702 0 22.3345 4.90212 13.623 13.6194C4.90257 22.3402 0.0024156 34.1672 0 46.5C0 58.8276 4.9043 70.6633 13.623 79.3806C22.3345 88.0979 34.1702 93 46.5 93C58.8298 93 70.6655 88.0979 79.377 79.3806C88.0957 70.6633 93 58.8276 93 46.5C93 34.1724 88.0957 22.3367 79.377 13.6194C70.6655 4.90212 58.8298 0 46.5 0Z" fill="url(#paint0_linear_40_86)"/>
                                        <path d="M21.0485 46.0089C34.6062 40.1034 43.6446 36.2097 48.1638 34.3286C61.0821 28.9572 63.7631 28.0243 65.5141 27.9926C65.8992 27.9865 66.7566 28.0816 67.316 28.5339C67.781 28.9154 67.9118 29.4312 67.9772 29.7934C68.0353 30.1553 68.1152 30.9799 68.0498 31.6236C67.3523 38.9765 64.3226 56.8194 62.7823 65.055C62.1356 68.5396 60.8496 69.7079 59.6072 69.8219C56.9044 70.0704 54.8555 68.0375 52.2398 66.3235C48.1493 63.6403 45.8388 61.9707 41.8645 59.3529C37.2727 56.3275 40.2516 54.6644 42.8672 51.947C43.5502 51.2357 55.4512 40.4136 55.6765 39.432C55.7055 39.3092 55.7346 38.8515 55.4585 38.6103C55.1897 38.3683 54.7901 38.4512 54.4995 38.5165C54.0853 38.6095 47.5535 42.9311 34.8823 51.4806C33.0295 52.755 31.3512 53.3762 29.8399 53.3435C28.1834 53.3079 24.9865 52.4048 22.6106 51.6332C19.7044 50.6865 17.3866 50.1859 17.5901 48.578C17.6918 47.741 18.847 46.8844 21.0485 46.0089Z" fill="white"/>
                                    </g>
                                    <defs>
                                        <linearGradient id="paint0_linear_40_86" x1="4650" y1="0" x2="4650" y2="9300" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#2AABEE"/>
                                            <stop offset="1" stop-color="#229ED9"/>
                                        </linearGradient>
                                        <clipPath id="clip0_40_86">
                                            <rect width="93" height="93" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !otpVerifiedEmail}
                <div class=" flex justify-center items-center">
                    <form on:submit|preventDefault={handleVerifyEmail} class="w-[500px] h-auto space-y-6 border-2 border-solid border-green-400 px-[2%] bg-white rounded-lg py-[20px]">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>Verification Email</span>
                        </div>
                        <div class="">
                            <Input bind:value={emailData.otp} placeholder="Input OTP code" color="green" type="text" required/>
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">
                                Verify
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !otpVerifiedTelegram}
                <div class=" flex justify-center items-center">
                    <form on:submit|preventDefault={handleVerifyTelegram} class="w-[500px] h-auto space-y-6 bg-white border-2 border-solid border-green-400 px-[2%] py-[20px] rounded-lg">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>Verification Telegram</span>
                        </div>
                        <div class="">
                            <Input bind:value={telegramData.otp} placeholder="Input OTP code" color="green" type="text" required/>
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">
                                Verify
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !otpVerifiedSMS}
                <div class=" flex justify-center items-center">
                    <form on:submit|preventDefault={handleVerifySMS} class="w-[500px] h-auto space-y-6 bg-white border-2 border-solid border-green-400 px-[2%] py-[20px] rounded-lg">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>Verification SMS</span>
                        </div>
                        <div class="">
                            <Input bind:value={smsData.otp} placeholder="Input OTP code" type="text" color="green" required/>
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">
                                Verify
                            </Button>
                        </div>
                    </form>
                </div>
            {/if}
        </TabItem>
        <TabItem title="User Register" activeClasses="p-3 text-white bg-green-700 rounded-lg dark:bg-gray-800 dark:text-primary-500">
            {#if !registerEmail} 
                <div class="flex justify-center items-center">
                    <form on:submit|preventDefault={handleRegisterEmail} class="w-[500px] h-auto bg-white border-2 border-solid border-green-400 px-[2%] space-y-6 rounded-lg py-[20px]">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>User Register</span>
                        </div>
                        <div class="">
                            <Input bind:value={emailRegister.username} type="text" placeholder="Username" color="green" required/>
                        </div>
                        <div class="">
                            <Input bind:value={emailRegister.email} type="email" placeholder="Email" color="green" required/>
                        </div>
                        <div class="flex items-center">
                            <Input bind:value={emailRegister.password} type="password" id="registerEmail" placeholder="Password" color="green" required/>
                            {#if showPassword}
                                <i class="ml-[-35px]" on:click={() => viewPassword("registerEmail")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 93" fill="none">
                                        <path d="M85.5709 44.1568C82.3783 37.4307 78.579 31.9451 74.173 27.7002L69.552 32.3211C73.3202 35.9221 76.6024 40.633 79.4405 46.5C71.8843 62.1392 61.1584 69.5684 46.5 69.5684C42.1001 69.5684 38.0474 68.8908 34.3419 67.5358L29.335 72.5427C34.4815 74.9192 40.2031 76.1074 46.5 76.1074C63.9557 76.1074 76.9793 67.0163 85.5709 48.8341C85.9163 48.1028 86.0954 47.3042 86.0954 46.4955C86.0954 45.6867 85.9163 44.8881 85.5709 44.1568ZM79.7975 15.0362L75.9258 11.16C75.8583 11.0924 75.7782 11.0388 75.69 11.0023C75.6018 10.9657 75.5072 10.9469 75.4118 10.9469C75.3163 10.9469 75.2217 10.9657 75.1335 11.0023C75.0453 11.0388 74.9652 11.0924 74.8977 11.16L64.9647 21.0885C59.4882 18.2912 53.3333 16.8926 46.5 16.8926C29.0443 16.8926 16.0207 25.9837 7.42911 44.1659C7.08377 44.8972 6.90466 45.6958 6.90466 46.5045C6.90466 47.3132 7.08377 48.1119 7.42911 48.8432C10.8615 56.0725 14.9938 61.8671 19.8261 66.2271L10.2155 75.835C10.0793 75.9712 10.0028 76.1559 10.0028 76.3485C10.0028 76.5412 10.0793 76.7259 10.2155 76.8621L14.0926 80.7393C14.2288 80.8754 14.4136 80.9519 14.6062 80.9519C14.7988 80.9519 14.9835 80.8754 15.1198 80.7393L79.7975 16.0643C79.865 15.9968 79.9186 15.9167 79.9552 15.8285C79.9917 15.7403 80.0106 15.6457 80.0106 15.5502C80.0106 15.4548 79.9917 15.3602 79.9552 15.272C79.9186 15.1838 79.865 15.1037 79.7975 15.0362ZM13.5595 46.5C21.1248 30.8607 31.8507 23.4316 46.5 23.4316C51.4533 23.4316 55.9571 24.2817 60.0431 26.01L53.6585 32.3947C50.6348 30.7814 47.1726 30.1826 43.7827 30.6868C40.3928 31.1909 37.2547 32.7712 34.8313 35.1946C32.408 37.618 30.8276 40.7561 30.3235 44.146C29.8194 47.5359 30.4181 50.998 32.0314 54.0217L24.4552 61.598C20.262 57.897 16.6474 52.8828 13.5595 46.5ZM35.9648 46.5C35.9664 44.8985 36.3458 43.32 37.072 41.8926C37.7983 40.4653 38.851 39.2294 40.1447 38.2854C41.4383 37.3413 42.9364 36.7158 44.5173 36.4595C46.0981 36.2032 47.7171 36.3234 49.2428 36.8104L36.4471 49.606C36.1264 48.6019 35.9637 47.5541 35.9648 46.5Z" fill="black"/>
                                        <path d="M46.1367 56.6719C45.8225 56.6719 45.5128 56.6574 45.2058 56.6292L40.4087 61.4263C43.294 62.5313 46.4375 62.7768 49.4594 62.1333C52.4812 61.4898 55.252 59.9847 57.4367 57.8C59.6214 55.6153 61.1265 52.8445 61.77 49.8227C62.4136 46.8008 62.168 43.6572 61.063 40.772L56.2659 45.5691C56.2941 45.8761 56.3086 46.1858 56.3086 46.5C56.3093 47.836 56.0467 49.159 55.5358 50.3935C55.0248 51.6279 54.2756 52.7495 53.3309 53.6942C52.3862 54.6389 51.2646 55.3881 50.0302 55.8991C48.7958 56.41 47.4727 56.6726 46.1367 56.6719Z" fill="black"/>
                                    </svg>
                                </i>
                            {:else}    
                                <i class="ml-[-35px]" on:click={() => viewPassword("registerEmail")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="10" viewBox="0 0 93 53" fill="none">
                                        <path d="M46.5 0.0195312C28.5438 0.0195312 11.7609 8.94038 1.67757 23.8311C1.23293 24.4901 0.92346 25.2307 0.767078 26.0101C0.610697 26.7896 0.610517 27.5922 0.766547 28.3717C0.922577 29.1512 1.23172 29.892 1.67606 30.5512C2.1204 31.2103 2.69112 31.7748 3.35515 32.2118C4.39961 32.9272 5.52992 33.3314 6.70673 33.3314C8.65973 33.3314 10.67 32.3835 11.8503 30.6487C12.2223 30.0943 12.6802 29.6114 13.0772 29.082C15.4743 36.0373 19.9838 42.0704 25.9758 46.3387C31.9678 50.6069 39.1432 52.8973 46.5 52.89C53.8569 52.8979 61.0326 50.6077 67.0247 46.3393C73.0168 42.071 77.5261 36.0376 79.9228 29.082C80.3162 29.615 80.7777 30.0943 81.1497 30.6487C83.0275 33.4316 86.8548 34.0933 89.6448 32.2118C90.3093 31.7747 90.8804 31.2102 91.3251 30.5508C91.7699 29.8915 92.0794 29.1504 92.2357 28.3706C92.3921 27.5908 92.3922 26.7878 92.236 26.0079C92.0799 25.2281 91.7706 24.487 91.326 23.8275C86.3696 16.4975 79.6915 10.4946 71.8766 6.3446C64.0617 2.19458 55.3484 0.0204704 46.5 0.0195312ZM46.5 12.9859C49.5514 12.9934 52.4757 14.2089 54.6334 16.3666C56.791 18.5243 58.0066 21.4486 58.0141 24.5C58.0066 27.5514 56.791 30.4757 54.6334 32.6334C52.4757 34.791 49.5514 36.0066 46.5 36.0141C43.4486 36.0066 40.5243 34.791 38.3666 32.6334C36.209 30.4757 34.9934 27.5514 34.9859 24.5C34.9934 21.4486 36.209 18.5243 38.3666 16.3666C40.5243 14.2089 43.4486 12.9934 46.5 12.9859ZM60.6968 14.6635C66.6703 16.8096 71.9892 20.3472 76.4567 24.9471C73.1195 38.3892 60.9615 48.4225 46.5 48.4225C32.0385 48.4225 19.8805 38.3892 16.5433 24.9471C20.9584 20.4064 26.3473 16.928 32.3032 14.7743C30.5327 17.3595 29.5015 20.3788 29.3208 23.5069C29.14 26.635 29.8165 29.753 31.2773 32.5249C32.7382 35.2968 34.9279 37.6173 37.6105 39.2363C40.2931 40.8553 43.3667 41.7114 46.5 41.7121C48.7606 41.7126 50.9992 41.2678 53.0879 40.403C55.1766 39.5382 57.0745 38.2704 58.6731 36.6721C60.2718 35.0737 61.54 33.1761 62.4052 31.0876C63.2704 28.9991 63.7157 26.7606 63.7157 24.5C63.7417 20.9892 62.6878 17.5553 60.6968 14.6635Z" fill="black"/>
                                    </svg>
                                </i>
                            {/if}
                        </div>
                        <div class="">
                            <Input bind:value={emailRegister.phone_number} type="tel" placeholder="Phone Number" color="green" required/>
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">
                                {#if loading}
                                    <Spinner class="mr-3" color="green"/>
                                {/if}
                                Register
                            </Button>
                        </div>
                        <div class="flex justify-center items-center space-x-3">
                            <span>Continue with</span>
                            <Button color="none" on:click={registerTelegramForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 93 93" fill="none">
                                    <g clip-path="url(#clip0_40_86)">
                                        <path d="M46.5 0C34.1702 0 22.3345 4.90212 13.623 13.6194C4.90257 22.3402 0.0024156 34.1672 0 46.5C0 58.8276 4.9043 70.6633 13.623 79.3806C22.3345 88.0979 34.1702 93 46.5 93C58.8298 93 70.6655 88.0979 79.377 79.3806C88.0957 70.6633 93 58.8276 93 46.5C93 34.1724 88.0957 22.3367 79.377 13.6194C70.6655 4.90212 58.8298 0 46.5 0Z" fill="url(#paint0_linear_40_86)"/>
                                        <path d="M21.0485 46.0089C34.6062 40.1034 43.6446 36.2097 48.1638 34.3286C61.0821 28.9572 63.7631 28.0243 65.5141 27.9926C65.8992 27.9865 66.7566 28.0816 67.316 28.5339C67.781 28.9154 67.9118 29.4312 67.9772 29.7934C68.0353 30.1553 68.1152 30.9799 68.0498 31.6236C67.3523 38.9765 64.3226 56.8194 62.7823 65.055C62.1356 68.5396 60.8496 69.7079 59.6072 69.8219C56.9044 70.0704 54.8555 68.0375 52.2398 66.3235C48.1493 63.6403 45.8388 61.9707 41.8645 59.3529C37.2727 56.3275 40.2516 54.6644 42.8672 51.947C43.5502 51.2357 55.4512 40.4136 55.6765 39.432C55.7055 39.3092 55.7346 38.8515 55.4585 38.6103C55.1897 38.3683 54.7901 38.4512 54.4995 38.5165C54.0853 38.6095 47.5535 42.9311 34.8823 51.4806C33.0295 52.755 31.3512 53.3762 29.8399 53.3435C28.1834 53.3079 24.9865 52.4048 22.6106 51.6332C19.7044 50.6865 17.3866 50.1859 17.5901 48.578C17.6918 47.741 18.847 46.8844 21.0485 46.0089Z" fill="white"/>
                                    </g>
                                    <defs>
                                        <linearGradient id="paint0_linear_40_86" x1="4650" y1="0" x2="4650" y2="9300" gradientUnits="userSpaceOnUse">
                                            <stop stop-color="#2AABEE"/>
                                            <stop offset="1" stop-color="#229ED9"/>
                                        </linearGradient>
                                        <clipPath id="clip0_40_86">
                                            <rect width="93" height="93" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !registerTelegram}
                <div class="flex justify-center items-center">
                    <form on:submit|preventDefault={handleRegisterTelegram} class="w-[500px] h-auto bg-white border-2 border-solid border-green-400 px-[2%] space-y-6 rounded-lg py-[20px]">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>User Register</span>
                        </div>
                        <div class="">
                            <Input bind:value={telegramRegister.username} color="green" placeholder="Username" type="text" required/>
                        </div>
                        <div class="flex items-center">
                            <Input id="registerTelPassword" bind:value={telegramRegister.password} color="green" placeholder="Password" type="password" required/>
                            {#if showPassword}
                                <i class="ml-[-35px]" on:click={() => viewPassword("registerTelPassword")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 93" fill="none">
                                        <path d="M85.5709 44.1568C82.3783 37.4307 78.579 31.9451 74.173 27.7002L69.552 32.3211C73.3202 35.9221 76.6024 40.633 79.4405 46.5C71.8843 62.1392 61.1584 69.5684 46.5 69.5684C42.1001 69.5684 38.0474 68.8908 34.3419 67.5358L29.335 72.5427C34.4815 74.9192 40.2031 76.1074 46.5 76.1074C63.9557 76.1074 76.9793 67.0163 85.5709 48.8341C85.9163 48.1028 86.0954 47.3042 86.0954 46.4955C86.0954 45.6867 85.9163 44.8881 85.5709 44.1568ZM79.7975 15.0362L75.9258 11.16C75.8583 11.0924 75.7782 11.0388 75.69 11.0023C75.6018 10.9657 75.5072 10.9469 75.4118 10.9469C75.3163 10.9469 75.2217 10.9657 75.1335 11.0023C75.0453 11.0388 74.9652 11.0924 74.8977 11.16L64.9647 21.0885C59.4882 18.2912 53.3333 16.8926 46.5 16.8926C29.0443 16.8926 16.0207 25.9837 7.42911 44.1659C7.08377 44.8972 6.90466 45.6958 6.90466 46.5045C6.90466 47.3132 7.08377 48.1119 7.42911 48.8432C10.8615 56.0725 14.9938 61.8671 19.8261 66.2271L10.2155 75.835C10.0793 75.9712 10.0028 76.1559 10.0028 76.3485C10.0028 76.5412 10.0793 76.7259 10.2155 76.8621L14.0926 80.7393C14.2288 80.8754 14.4136 80.9519 14.6062 80.9519C14.7988 80.9519 14.9835 80.8754 15.1198 80.7393L79.7975 16.0643C79.865 15.9968 79.9186 15.9167 79.9552 15.8285C79.9917 15.7403 80.0106 15.6457 80.0106 15.5502C80.0106 15.4548 79.9917 15.3602 79.9552 15.272C79.9186 15.1838 79.865 15.1037 79.7975 15.0362ZM13.5595 46.5C21.1248 30.8607 31.8507 23.4316 46.5 23.4316C51.4533 23.4316 55.9571 24.2817 60.0431 26.01L53.6585 32.3947C50.6348 30.7814 47.1726 30.1826 43.7827 30.6868C40.3928 31.1909 37.2547 32.7712 34.8313 35.1946C32.408 37.618 30.8276 40.7561 30.3235 44.146C29.8194 47.5359 30.4181 50.998 32.0314 54.0217L24.4552 61.598C20.262 57.897 16.6474 52.8828 13.5595 46.5ZM35.9648 46.5C35.9664 44.8985 36.3458 43.32 37.072 41.8926C37.7983 40.4653 38.851 39.2294 40.1447 38.2854C41.4383 37.3413 42.9364 36.7158 44.5173 36.4595C46.0981 36.2032 47.7171 36.3234 49.2428 36.8104L36.4471 49.606C36.1264 48.6019 35.9637 47.5541 35.9648 46.5Z" fill="black"/>
                                        <path d="M46.1367 56.6719C45.8225 56.6719 45.5128 56.6574 45.2058 56.6292L40.4087 61.4263C43.294 62.5313 46.4375 62.7768 49.4594 62.1333C52.4812 61.4898 55.252 59.9847 57.4367 57.8C59.6214 55.6153 61.1265 52.8445 61.77 49.8227C62.4136 46.8008 62.168 43.6572 61.063 40.772L56.2659 45.5691C56.2941 45.8761 56.3086 46.1858 56.3086 46.5C56.3093 47.836 56.0467 49.159 55.5358 50.3935C55.0248 51.6279 54.2756 52.7495 53.3309 53.6942C52.3862 54.6389 51.2646 55.3881 50.0302 55.8991C48.7958 56.41 47.4727 56.6726 46.1367 56.6719Z" fill="black"/>
                                    </svg>
                                </i>
                            {:else}    
                                <i class="ml-[-35px]" on:click={() => viewPassword("registerTelPassword")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="10" viewBox="0 0 93 53" fill="none">
                                        <path d="M46.5 0.0195312C28.5438 0.0195312 11.7609 8.94038 1.67757 23.8311C1.23293 24.4901 0.92346 25.2307 0.767078 26.0101C0.610697 26.7896 0.610517 27.5922 0.766547 28.3717C0.922577 29.1512 1.23172 29.892 1.67606 30.5512C2.1204 31.2103 2.69112 31.7748 3.35515 32.2118C4.39961 32.9272 5.52992 33.3314 6.70673 33.3314C8.65973 33.3314 10.67 32.3835 11.8503 30.6487C12.2223 30.0943 12.6802 29.6114 13.0772 29.082C15.4743 36.0373 19.9838 42.0704 25.9758 46.3387C31.9678 50.6069 39.1432 52.8973 46.5 52.89C53.8569 52.8979 61.0326 50.6077 67.0247 46.3393C73.0168 42.071 77.5261 36.0376 79.9228 29.082C80.3162 29.615 80.7777 30.0943 81.1497 30.6487C83.0275 33.4316 86.8548 34.0933 89.6448 32.2118C90.3093 31.7747 90.8804 31.2102 91.3251 30.5508C91.7699 29.8915 92.0794 29.1504 92.2357 28.3706C92.3921 27.5908 92.3922 26.7878 92.236 26.0079C92.0799 25.2281 91.7706 24.487 91.326 23.8275C86.3696 16.4975 79.6915 10.4946 71.8766 6.3446C64.0617 2.19458 55.3484 0.0204704 46.5 0.0195312ZM46.5 12.9859C49.5514 12.9934 52.4757 14.2089 54.6334 16.3666C56.791 18.5243 58.0066 21.4486 58.0141 24.5C58.0066 27.5514 56.791 30.4757 54.6334 32.6334C52.4757 34.791 49.5514 36.0066 46.5 36.0141C43.4486 36.0066 40.5243 34.791 38.3666 32.6334C36.209 30.4757 34.9934 27.5514 34.9859 24.5C34.9934 21.4486 36.209 18.5243 38.3666 16.3666C40.5243 14.2089 43.4486 12.9934 46.5 12.9859ZM60.6968 14.6635C66.6703 16.8096 71.9892 20.3472 76.4567 24.9471C73.1195 38.3892 60.9615 48.4225 46.5 48.4225C32.0385 48.4225 19.8805 38.3892 16.5433 24.9471C20.9584 20.4064 26.3473 16.928 32.3032 14.7743C30.5327 17.3595 29.5015 20.3788 29.3208 23.5069C29.14 26.635 29.8165 29.753 31.2773 32.5249C32.7382 35.2968 34.9279 37.6173 37.6105 39.2363C40.2931 40.8553 43.3667 41.7114 46.5 41.7121C48.7606 41.7126 50.9992 41.2678 53.0879 40.403C55.1766 39.5382 57.0745 38.2704 58.6731 36.6721C60.2718 35.0737 61.54 33.1761 62.4052 31.0876C63.2704 28.9991 63.7157 26.7606 63.7157 24.5C63.7417 20.9892 62.6878 17.5553 60.6968 14.6635Z" fill="black"/>
                                    </svg>
                                </i>
                            {/if}
                        </div>
                        <div class="">
                            <Input bind:value={telegramRegister.phone_number} color="green" placeholder="Phone Number" type="tel" required/>
                        </div>
                        <div class="flex items-center">
                            <Input id="telegramBot" bind:value={telegramRegister.bot_token} color="green" placeholder="Your Bot Token" type="password" required/>
                            {#if showPassword}
                                <i class="ml-[-35px]" on:click={() => viewPassword("telegramBot")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 93" fill="none">
                                        <path d="M85.5709 44.1568C82.3783 37.4307 78.579 31.9451 74.173 27.7002L69.552 32.3211C73.3202 35.9221 76.6024 40.633 79.4405 46.5C71.8843 62.1392 61.1584 69.5684 46.5 69.5684C42.1001 69.5684 38.0474 68.8908 34.3419 67.5358L29.335 72.5427C34.4815 74.9192 40.2031 76.1074 46.5 76.1074C63.9557 76.1074 76.9793 67.0163 85.5709 48.8341C85.9163 48.1028 86.0954 47.3042 86.0954 46.4955C86.0954 45.6867 85.9163 44.8881 85.5709 44.1568ZM79.7975 15.0362L75.9258 11.16C75.8583 11.0924 75.7782 11.0388 75.69 11.0023C75.6018 10.9657 75.5072 10.9469 75.4118 10.9469C75.3163 10.9469 75.2217 10.9657 75.1335 11.0023C75.0453 11.0388 74.9652 11.0924 74.8977 11.16L64.9647 21.0885C59.4882 18.2912 53.3333 16.8926 46.5 16.8926C29.0443 16.8926 16.0207 25.9837 7.42911 44.1659C7.08377 44.8972 6.90466 45.6958 6.90466 46.5045C6.90466 47.3132 7.08377 48.1119 7.42911 48.8432C10.8615 56.0725 14.9938 61.8671 19.8261 66.2271L10.2155 75.835C10.0793 75.9712 10.0028 76.1559 10.0028 76.3485C10.0028 76.5412 10.0793 76.7259 10.2155 76.8621L14.0926 80.7393C14.2288 80.8754 14.4136 80.9519 14.6062 80.9519C14.7988 80.9519 14.9835 80.8754 15.1198 80.7393L79.7975 16.0643C79.865 15.9968 79.9186 15.9167 79.9552 15.8285C79.9917 15.7403 80.0106 15.6457 80.0106 15.5502C80.0106 15.4548 79.9917 15.3602 79.9552 15.272C79.9186 15.1838 79.865 15.1037 79.7975 15.0362ZM13.5595 46.5C21.1248 30.8607 31.8507 23.4316 46.5 23.4316C51.4533 23.4316 55.9571 24.2817 60.0431 26.01L53.6585 32.3947C50.6348 30.7814 47.1726 30.1826 43.7827 30.6868C40.3928 31.1909 37.2547 32.7712 34.8313 35.1946C32.408 37.618 30.8276 40.7561 30.3235 44.146C29.8194 47.5359 30.4181 50.998 32.0314 54.0217L24.4552 61.598C20.262 57.897 16.6474 52.8828 13.5595 46.5ZM35.9648 46.5C35.9664 44.8985 36.3458 43.32 37.072 41.8926C37.7983 40.4653 38.851 39.2294 40.1447 38.2854C41.4383 37.3413 42.9364 36.7158 44.5173 36.4595C46.0981 36.2032 47.7171 36.3234 49.2428 36.8104L36.4471 49.606C36.1264 48.6019 35.9637 47.5541 35.9648 46.5Z" fill="black"/>
                                        <path d="M46.1367 56.6719C45.8225 56.6719 45.5128 56.6574 45.2058 56.6292L40.4087 61.4263C43.294 62.5313 46.4375 62.7768 49.4594 62.1333C52.4812 61.4898 55.252 59.9847 57.4367 57.8C59.6214 55.6153 61.1265 52.8445 61.77 49.8227C62.4136 46.8008 62.168 43.6572 61.063 40.772L56.2659 45.5691C56.2941 45.8761 56.3086 46.1858 56.3086 46.5C56.3093 47.836 56.0467 49.159 55.5358 50.3935C55.0248 51.6279 54.2756 52.7495 53.3309 53.6942C52.3862 54.6389 51.2646 55.3881 50.0302 55.8991C48.7958 56.41 47.4727 56.6726 46.1367 56.6719Z" fill="black"/>
                                    </svg>
                                </i>
                            {:else}    
                                <i class="ml-[-35px]" on:click={() => viewPassword("telegramBot")}>
                                    <svg xmlns="http://www.w3.org/2000/svg" width="30" height="10" viewBox="0 0 93 53" fill="none">
                                        <path d="M46.5 0.0195312C28.5438 0.0195312 11.7609 8.94038 1.67757 23.8311C1.23293 24.4901 0.92346 25.2307 0.767078 26.0101C0.610697 26.7896 0.610517 27.5922 0.766547 28.3717C0.922577 29.1512 1.23172 29.892 1.67606 30.5512C2.1204 31.2103 2.69112 31.7748 3.35515 32.2118C4.39961 32.9272 5.52992 33.3314 6.70673 33.3314C8.65973 33.3314 10.67 32.3835 11.8503 30.6487C12.2223 30.0943 12.6802 29.6114 13.0772 29.082C15.4743 36.0373 19.9838 42.0704 25.9758 46.3387C31.9678 50.6069 39.1432 52.8973 46.5 52.89C53.8569 52.8979 61.0326 50.6077 67.0247 46.3393C73.0168 42.071 77.5261 36.0376 79.9228 29.082C80.3162 29.615 80.7777 30.0943 81.1497 30.6487C83.0275 33.4316 86.8548 34.0933 89.6448 32.2118C90.3093 31.7747 90.8804 31.2102 91.3251 30.5508C91.7699 29.8915 92.0794 29.1504 92.2357 28.3706C92.3921 27.5908 92.3922 26.7878 92.236 26.0079C92.0799 25.2281 91.7706 24.487 91.326 23.8275C86.3696 16.4975 79.6915 10.4946 71.8766 6.3446C64.0617 2.19458 55.3484 0.0204704 46.5 0.0195312ZM46.5 12.9859C49.5514 12.9934 52.4757 14.2089 54.6334 16.3666C56.791 18.5243 58.0066 21.4486 58.0141 24.5C58.0066 27.5514 56.791 30.4757 54.6334 32.6334C52.4757 34.791 49.5514 36.0066 46.5 36.0141C43.4486 36.0066 40.5243 34.791 38.3666 32.6334C36.209 30.4757 34.9934 27.5514 34.9859 24.5C34.9934 21.4486 36.209 18.5243 38.3666 16.3666C40.5243 14.2089 43.4486 12.9934 46.5 12.9859ZM60.6968 14.6635C66.6703 16.8096 71.9892 20.3472 76.4567 24.9471C73.1195 38.3892 60.9615 48.4225 46.5 48.4225C32.0385 48.4225 19.8805 38.3892 16.5433 24.9471C20.9584 20.4064 26.3473 16.928 32.3032 14.7743C30.5327 17.3595 29.5015 20.3788 29.3208 23.5069C29.14 26.635 29.8165 29.753 31.2773 32.5249C32.7382 35.2968 34.9279 37.6173 37.6105 39.2363C40.2931 40.8553 43.3667 41.7114 46.5 41.7121C48.7606 41.7126 50.9992 41.2678 53.0879 40.403C55.1766 39.5382 57.0745 38.2704 58.6731 36.6721C60.2718 35.0737 61.54 33.1761 62.4052 31.0876C63.2704 28.9991 63.7157 26.7606 63.7157 24.5C63.7417 20.9892 62.6878 17.5553 60.6968 14.6635Z" fill="black"/>
                                    </svg>
                                </i>
                            {/if}
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">
                                {#if loading}
                                    <Spinner class="mr-3" color="green"/>
                                    <span>Please type "/start" on your telegram bot and follow the instruction</span>
                                {:else}
                                    Register
                                {/if}
                            </Button>
                        </div>
                        <div class="flex justify-center items-center space-x-3">
                            <span>Continue with</span>
                            <Button color="none" on:click={registerEmailForm}>
                                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="20" viewBox="0 0 93 75" fill="none">
                                    <g clip-path="url(#clip0_41_93)">
                                        <path d="M21.1364 74.6308V36.1943L9.99278 25.289L0 19.2373V67.8478C0 71.6009 2.84268 74.6308 6.34107 74.6308H21.1364Z" fill="#4285F4"/>
                                        <path d="M71.8635 74.6308H86.6589C90.1678 74.6308 93 71.5896 93 67.8478V19.2377L81.6816 26.1691L71.8635 36.1943V74.6308Z" fill="#34A853"/>
                                        <path d="M21.1365 36.1943L19.6201 21.176L21.1365 6.80206L46.5 27.1508L71.8636 6.80206L73.5598 20.4L71.8636 36.1943L46.5 56.543L21.1365 36.1943Z" fill="#EA4335"/>
                                        <path d="M71.8635 6.80226V36.1945L93 19.2375V10.1936C93 1.80563 84.0487 -2.97611 77.7821 2.05433L71.8635 6.80226Z" fill="#FBBC04"/>
                                        <path d="M0 19.2374L9.72104 27.0366L21.1364 36.1944V6.80213L15.2179 2.0542C8.94035 -2.97663 0 1.8055 0 10.1931V19.237V19.2374Z" fill="#C5221F"/>
                                    </g>
                                    <defs>
                                        <clipPath id="clip0_41_93">
                                            <rect width="93" height="75" fill="white"/>
                                        </clipPath>
                                    </defs>
                                </svg>
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !otpVerifiedRegisterEmail}
                <div class=" flex justify-center items-center">
                    <form on:submit|preventDefault={handleVerifyRegisterEmail} class="w-[500px] h-auto space-y-6 bg-white border-2 border-solid border-green-400 px-[2%] py-[20px] rounded-lg">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>Verification Email</span>
                        </div>
                        <div class="">
                            <Input bind:value={emailRegister.otp} placeholder="Input OTP code" type="text" color="green" required/>
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">
                                Verify
                            </Button>
                        </div>
                    </form>
                </div>
            {:else if !otpVerifiedRegisterTelegram}
                <div class=" flex justify-center items-center">
                    <form on:submit|preventDefault={handleVerifyRegisterTelegram} class="w-[500px] h-auto space-y-6 bg-white border-2 border-solid border-green-400 px-[2%] py-[20px] rounded-lg">
                        <div class="text-center text-[1.75rem] text-green-400">
                            <span>Verification SMS</span>
                        </div>
                        <div class="">
                            <Input bind:value={telegramRegister.otp} placeholder="Input OTP code" type="text" color="green" required/>
                        </div>
                        <div class="">
                            <Button type="submit" class="w-full" outline color="green">
                                Verify
                            </Button>
                        </div>
                    </form>
                </div>
            {/if}
        </TabItem>
    </Tabs>
</div>

<script>
    import { Tabs, TabItem, Input, Button, Spinner } from 'flowbite-svelte'
    import { createEventDispatcher, onMount } from 'svelte';
    import { goto } from '$app/navigation';
    import { getToken } from '../stores/token';
    import { getID } from '../stores/token'
    import { env } from '$env/dynamic/public';
    const dispatch = createEventDispatcher();


    // Admin login
    let email = '';
    let password = '';
    let otp = '';
    let token = '';
    let loading = false;

    let otpSent = false;
    let otpVerified = false;


    // User login
    let loginEmail = false;
    let loginTelegram = false;
    let loginSMS = false;
    let otpVerifiedEmail = false;
    let otpVerifiedTelegram = false;
    let otpVerifiedSMS = false;


    // User Register Update
    let registerEmail = false;
    let registerTelegram = false;
    let otpVerifiedRegisterEmail = false;
    let otpVerifiedRegisterTelegram = false;


    let showPassword = false;


    let emailData = {
        email: '',
        password: '',
        otp: ''
    }
    let telegramData = {
        username: '',
        bot_token: '',
        otp: ''
    }
    let smsData = {
        phone_number: '',
        otp: ''
    }


    // Update
    let emailRegister = {
        username: '',
        email: '',
        password: '',
        phone_number: '',
        otp: ''
    }

    let telegramRegister = {
        username: '',
        password: '',
        phone_number: '',
        bot_token: '',
        otp: ''
    }


    function resetClick() {
        sessionStorage.clear();
    }

    function loginEmailForm() {
        loginTelegram = true;
        loginEmail = false;
        loginSMS = true;
        sessionStorage.setItem("login", "email");
    }

    function loginTelegramForm() {
        loginTelegram = false;
        loginEmail = true
        loginSMS = true;
        sessionStorage.setItem("login", "telegram");
    }

    function loginSMSForm() {
        loginTelegram = true;
        loginEmail = true;
        loginSMS = false;
        sessionStorage.setItem("login", "sms");
    }

    function registerEmailForm() {
        registerEmail = false;
        registerTelegram = true;
        sessionStorage.setItem("register", "email");
    }


    function registerTelegramForm() {
        registerTelegram = false;
        registerEmail = true;
        sessionStorage.setItem("register", "telegram");
    }

    function viewPassword(pass) {
        const ps = document.getElementById(pass);
        showPassword = !showPassword;
        if(showPassword) {
            ps.type = "text";
        }
        else {
            ps.type = "password";
        }

    }
    
    async function handleLogin() {
        loading = true;
        if(email === env.PUBLIC_SUPER_EMAIL && password === env.PUBLIC_SUPER_PASSWORD) {
            goto('/superadmin');
            return;
        }
        const response = await fetch(`${env.PUBLIC_HOST}login/admin`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, password })
        })
        
        const data = await response.json();
        if(data.success) {
            otpSent = true;
            loading = false;
            dispatch('otpSent', data);
        }
        else{
            loading = false;
            dispatch('error', data.error);
            alert(data.error)
        }
    }

    async function handleVerify() {
        const response = await fetch(`${env.PUBLIC_HOST}login/admin`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json'
            },
            body: JSON.stringify({ email, password, otp })
        })
        
        const data = await response.json();
        if(data.success) {
            otpVerified = true;
            token = data.application_token;
            getToken.set(token);

            resetClick();
            
            dispatch('otpSent', data);
            goto('/admin')
        }
        else{
            dispatch('error', data.error);
            alert(data.error);
        }
    }

    async function handleLoginEmail() {
        loading = true;

        const response = await fetch(`${env.PUBLIC_HOST}user/login/email`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(emailData)
        })
        const data = await response.json();

        if(data.success) {
            loginEmail = true;
            loginTelegram = true;
            loginSMS = true;
            loading = false;
        }
        else {
            loading = false;
            alert(data.error);
        }
    }

    async function handleVerifyEmail() {

        const response = await fetch(`${env.PUBLIC_HOST}user/login/email`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(emailData)
        })

        let data = await response.json();

        if(data.success) {
            otpVerified = true;
            otpVerifiedTelegram = true;
            otpVerifiedSMS = true;

            getID.set(data.user._id);

            resetClick();

            goto('/user')
        }
        else {
            alert(data.error);
        }
    }

    async function handleLoginTelegram() {
        loading = true;

        const response = await fetch(`${env.PUBLIC_HOST}user/login/telegram`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(telegramData)
        })

        const data = await response.json();

        if(data.success) {
            loginTelegram = true;
            loginSMS = true;
            otpVerifiedEmail = true;
            loading = false;
        }
        else {
            loading = false;
            alert(data.error)
        }

    }

    async function handleVerifyTelegram() {

        const response = await fetch(`${env.PUBLIC_HOST}user/login/telegram`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(telegramData)
        });


        const data = await response.json();

        if(data.success) {
            otpVerifiedTelegram = true;
            otpVerifiedSMS = true;

            getID.set(data.user._id);

            resetClick();

            goto('/user')
        }
        else {
            alert(data.error);
        }
    }

    async function handleLoginSMS() {
        loading = true;

        const response = await fetch(`${env.PUBLIC_HOST}user/login/sms`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(smsData)
        });

        const data = await response.json();

        if(data.success) {
            loginSMS = true;
            otpVerifiedEmail = true;
            otpVerifiedTelegram = true;
            loading = false;
        }
        else {
            loading = false;
            alert(data.error);
        }
    }

    async function handleVerifySMS() {

        const response = await fetch(`${env.PUBLIC_HOST}user/login/sms`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(smsData)
        });

        const data = await response.json();

        if(data.success) {
            otpVerifiedSMS = true;

            getID.set(data.user._id);

            resetClick();

            goto('/user')
        }
        else {
            alert(data.error);
        }
    }


    async function handleRegisterEmail() {
        loading = true;

        const response = await fetch(`${env.PUBLIC_HOST}user/register`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(emailRegister)
        })

        const data = await response.json();

        if(data.success) {
            registerEmail = true;
            registerTelegram = true;
            loading = false;
        }
        else {
            loading = false;
            alert(data.error);
        }
    }


    async function handleRegisterTelegram() {
        loading = true;
        const response = await fetch(`${env.PUBLIC_HOST}user/register/telegram`, {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
            'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
        },
        body: JSON.stringify(telegramRegister)
        });

        const data = await response.json();

        if(data.success) {
            registerTelegram = true;
            otpVerifiedRegisterEmail = true;
        }
        else {
            alert(data.error);
        }

        loading = false;
    }

    async function handleVerifyRegisterEmail() {
        const response = await fetch(`${env.PUBLIC_HOST}user/register`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(emailRegister)
        });

        const getData = await response.json();
        console.log(getData);

        if(getData.success) {
            otpVerifiedRegisterEmail = true;
            otpVerifiedRegisterTelegram = true;
            sessionStorage.setItem('success', true);
            goto('/success');
        }
        else {
            alert(getData.error);
        }
    }


    async function handleVerifyRegisterTelegram() {
        const response = await fetch(`${env.PUBLIC_HOST}user/register/telegram`, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
                'Authorization': `Bearer ${env.PUBLIC_TOKEN}`
            },
            body: JSON.stringify(telegramRegister)
        });
        const getData = await response.json();
        
        if(getData.success) {
            otpVerifiedRegisterTelegram = true;

            sessionStorage.setItem('success', true);
            goto('/success');
        }
        else {
            alert(getData.error);
        }

    }

    onMount(() => {
        const getLogin = sessionStorage.getItem("login");
        const getRegister = sessionStorage.getItem("register");

        if(getLogin === "telegram") {
            loginTelegram = false;
            loginEmail = true;
            loginSMS = true;
        }
        else if(getLogin === "email") {
            loginEmail = false;
            loginTelegram = true;
            loginSMS = true;
        }
        else if(getLogin === "sms") {
            loginEmail = true;
            loginTelegram = true;
            loginSMS = false;
        }

        if(getRegister === "email") {
            registerEmail = false;
            registerTelegram = true;
        }
        else if(getRegister === "telegram") {
            registerEmail = true;
            registerTelegram = false;
        }
    })
    
</script>

